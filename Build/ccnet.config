<project name="ccimetadata" xmlns:cb="urn:ccnet.config.builder" queue="cci">
  <cb:define codeplexProjectName="ccimetadata" />
  <cb:define projectWorkingDirectory="$(workingDirectory)\$(codeplexProjectName)" />
  <cb:define majorVersion="1"/>
  <cb:define minorVersion="0"/>
  <cb:define svnUrl="https://$(codeplexProjectName).svn.codeplex.com/svn" />
  <cb:define svnDirectory="$(svnRoot)\$(codeplexProjectName)" />

  <workingDirectory>$(projectWorkingDirectory)</workingDirectory>
  <artifactDirectory>$(artifactDirectory)\$(codeplexProjectName)</artifactDirectory>


  <!-- build definition -->
  <triggers>
    <intervalTrigger />
  </triggers>

  <labeller type="dateLabeller" />

  <sourcecontrol type="svn">
    <trunkUrl>$(svnUrl)</trunkUrl>
    <workingDirectory>$(projectWorkingDirectory)</workingDirectory>
    <executable>$(svnExe)</executable>
    <!-- <cleanCopy>true</cleanCopy> -->
    <checkExternals>true</checkExternals>
  </sourcecontrol>

  <tasks>
    <msbuild>
      <executable>$(msbuild)</executable>
      <workingDirectory>$(projectWorkingDirectory)\build</workingDirectory>
      <projectFile>$(codeplexProjectName).build</projectFile>
      <targets>ContinuousBuild</targets>
      <buildArgs>/noconsolelogger</buildArgs>
      <timeout>1800</timeout>
      <logger>$(msbuildLogger)</logger>
    </msbuild>
  </tasks>

  <publishers>
    <merge>
      <files>
        <file>$(projectWorkingDirectory)\bin\*.results.xml</file>
      </files>
    </merge>
    <statistics />
    <xmllogger />
    <!-- clean up old drops -->
    <artifactcleanup cleanUpMethod="KeepLastXBuilds" cleanUpValue="10" />
    <!-- labelled build -->
    <buildpublisher>
      <alwaysPublish>true</alwaysPublish>
    </buildpublisher>
    <!--
      <mail
        from="fseplmbu@microsoft.com"
        mailhost="smtphost"
        includeDetails="true">
        <users>
          <user name="CCI.Metadata Build Notifications" group="buildmaster" address="pexbuild@microsoft.com"/>
        </users>
        <groups>
          <group name="developers" notification="change"/>
          <group name="buildmaster" notification="always"/>
        </groups>
      </mail>
      -->
  </publishers>
</project>
